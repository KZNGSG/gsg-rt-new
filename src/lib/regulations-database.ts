/**
 * База данных технических регламентов Таможенного союза
 *
 * Источники данных:
 * - Официальные тексты ТР ТС из системы Гарант
 * - Решение КТС №299 (Единый перечень товаров для СГР)
 *
 * Структура: код регламента -> перечень продукции -> тип документа
 *
 * Версия: 1.0 | Последнее обновление: 18 декабря 2025
 */

export type DocumentType = 'certificate' | 'declaration' | 'sgr' | 'rejection' | 'registration';

export interface ProductCategory {
  name: string;
  keywords: string[];
  tnvedCodes: string[];  // Коды ТН ВЭД (могут быть частичными, например "9503" - все начинающиеся с 9503)
  docType: DocumentType;
  notes?: string[];
  exceptions?: {
    condition: string;
    docType: DocumentType;
    reason: string;
  }[];
}

export interface TechnicalRegulation {
  id: string;              // TR_TS_007_2011
  number: string;          // 007/2011
  fullName: string;        // Полное название
  shortName: string;       // ТР ТС 007/2011
  garantTopicId: number;   // ID документа в Гарант для ссылки
  garantUrl: string;       // Прямая ссылка на Гарант
  defaultDocType: DocumentType;
  validFrom: string;       // Дата вступления в силу
  products: ProductCategory[];
}

// =====================================================
// ТР ТС 007/2011 - О безопасности продукции для детей и подростков
// Источник: Решение КТС от 23.09.2011 N 797
// =====================================================
export const TR_TS_007_2011: TechnicalRegulation = {
  id: 'TR_TS_007_2011',
  number: '007/2011',
  fullName: 'О безопасности продукции, предназначенной для детей и подростков',
  shortName: 'ТР ТС 007/2011',
  garantTopicId: 12190425,
  garantUrl: 'https://internet.garant.ru/#/document/12190425',
  defaultDocType: 'certificate',
  validFrom: '2012-07-01',
  products: [
    // ===== СЕРТИФИКАЦИЯ (Статья 12, п.4) =====
    {
      name: 'Соски молочные, соски-пустышки',
      keywords: ['соска', 'пустышка', 'соска молочная', 'соска-пустышка', 'латекс соска', 'силикон соска'],
      tnvedCodes: ['3924 90 000', '4014 90 000'],
      docType: 'certificate',
      notes: ['Обязательная сертификация по схеме 1с-4с'],
    },
    {
      name: 'Изделия санитарно-гигиенические из резины для детей',
      keywords: ['грелка детская', 'клеенка детская', 'резина детская'],
      tnvedCodes: ['4014'],
      docType: 'certificate',
    },
    {
      name: 'Изделия санитарно-гигиенические из пластмасс и металла для детей',
      keywords: ['ванночка детская', 'горшок детский', 'туалет детский'],
      tnvedCodes: ['3922', '3924', '7323', '7615'],
      docType: 'certificate',
    },
    {
      name: 'Посуда и столовые приборы детские',
      keywords: ['посуда детская', 'тарелка детская', 'чашка детская', 'ложка детская', 'бутылочка детская', 'поильник'],
      tnvedCodes: ['3924', '6911', '6912', '7013', '7323', '7615', '8211', '8215'],
      docType: 'certificate',
      notes: ['Для детей старше 3 лет и подростков'],
    },
    {
      name: 'Бельё постельное для детей',
      keywords: ['постельное белье детское', 'простыня детская', 'наволочка детская', 'пододеяльник детский'],
      tnvedCodes: ['6302'],
      docType: 'certificate',
    },
    {
      name: 'Изделия бельевые 1-го слоя для детей старше 3 лет',
      keywords: ['белье нательное детское', 'трусы детские', 'майка детская', 'пижама детская'],
      tnvedCodes: ['6107', '6108', '6109', '6207', '6208', '6212'],
      docType: 'certificate',
      notes: ['Для детей старше 3 лет и подростков'],
    },
    {
      name: 'Изделия чулочно-носочные трикотажные для детей',
      keywords: ['носки детские', 'колготки детские', 'чулки детские', 'получулки детские'],
      tnvedCodes: ['6115'],
      docType: 'certificate',
    },
    {
      name: 'Головные уборы летние для детей старше 3 лет',
      keywords: ['панама детская', 'кепка детская', 'бандана детская'],
      tnvedCodes: ['6505'],
      docType: 'certificate',
      notes: ['Летние головные уборы 1-го слоя для детей старше 3 лет'],
    },
    {
      name: 'Одежда и изделия 2-го слоя для детей',
      keywords: ['платье детское', 'блузка детская', 'рубашка детская', 'джемпер детский', 'свитер детский', 'юбка детская', 'брюки детские', 'шорты детские'],
      tnvedCodes: ['6104', '6105', '6106', '6110', '6111', '6203', '6204', '6205', '6206'],
      docType: 'certificate',
    },
    {
      name: 'Одежда и изделия 3-го слоя для детей до 1 года',
      keywords: ['комбинезон для новорожденных', 'конверт для новорожденных', 'куртка для новорожденных'],
      tnvedCodes: ['6111', '6209'],
      docType: 'certificate',
      notes: ['Для детей до 1 года обязательна сертификация'],
    },
    {
      name: 'Одежда, изделия и головные уборы из меха для детей до 1 года',
      keywords: ['шуба детская до года', 'мех для новорожденных'],
      tnvedCodes: ['4303'],
      docType: 'certificate',
      notes: ['Для детей до 1 года'],
    },
    {
      name: 'Обувь детская (кроме валяной)',
      keywords: ['обувь детская', 'ботинки детские', 'сапоги детские', 'сандалии детские', 'кроссовки детские', 'туфли детские'],
      tnvedCodes: ['6401', '6402', '6403', '6404', '6405'],
      docType: 'certificate',
      notes: ['Кроме валяной грубошерстной обуви'],
    },
    {
      name: 'Коляски детские',
      keywords: ['коляска детская', 'коляска-трансформер', 'коляска прогулочная', 'люлька'],
      tnvedCodes: ['8715 00 100'],
      docType: 'certificate',
    },
    {
      name: 'Велосипеды детские',
      keywords: ['велосипед детский', 'велосипед для детей', 'трехколесный велосипед'],
      tnvedCodes: ['8712 00'],
      docType: 'certificate',
      notes: ['С высотой седла от 435 до 635 мм'],
    },
    // ===== ДЕКЛАРИРОВАНИЕ (Статья 12, п.3) =====
    {
      name: 'Кожгалантерейные изделия для детей',
      keywords: ['ранец', 'рюкзак детский', 'портфель детский', 'сумка детская', 'ремень детский'],
      tnvedCodes: ['4202'],
      docType: 'declaration',
      notes: ['Декларирование по схеме 1д или 2д'],
    },
    {
      name: 'Школьно-письменные принадлежности',
      keywords: ['тетрадь', 'дневник', 'ручка школьная', 'карандаш', 'линейка', 'ластик', 'пенал', 'точилка'],
      tnvedCodes: ['4820', '4821', '9608', '9609', '9017 20 000'],
      docType: 'declaration',
      notes: ['Декларирование по схеме 1д или 2д'],
    },
    {
      name: 'Одежда и изделия 3-го слоя для детей старше 1 года',
      keywords: ['куртка детская', 'пальто детское', 'плащ детский', 'комбинезон детский'],
      tnvedCodes: ['6101', '6102', '6201', '6202'],
      docType: 'declaration',
      notes: ['Для детей старше 1 года - декларирование по схеме 3д, 4д или 6д'],
    },
    {
      name: 'Изделия из меха для детей старше 1 года',
      keywords: ['шуба детская', 'жилет меховой детский', 'варежки меховые детские'],
      tnvedCodes: ['4303'],
      docType: 'declaration',
      notes: ['Для детей старше 1 года'],
    },
    {
      name: 'Головные уборы 2-го слоя для детей старше 1 года',
      keywords: ['шапка детская', 'берет детский', 'кепка зимняя детская'],
      tnvedCodes: ['6505', '6506'],
      docType: 'declaration',
      notes: ['Для детей старше 1 года'],
    },
    {
      name: 'Готовые штучные текстильные изделия для детей',
      keywords: ['одеяло детское', 'полотенце детское', 'платок детский', 'шарф детский'],
      tnvedCodes: ['6301', '6302', '6303', '6304'],
      docType: 'declaration',
    },
    {
      name: 'Постельные принадлежности для детей',
      keywords: ['подушка детская', 'одеяло стеганое детское', 'наматрасник детский', 'балдахин'],
      tnvedCodes: ['9404'],
      docType: 'declaration',
    },
    {
      name: 'Валяная обувь грубошерстная для детей',
      keywords: ['валенки детские', 'обувь валяная детская'],
      tnvedCodes: ['6401 10'],
      docType: 'declaration',
    },
    {
      name: 'Издательская книжная и журнальная продукция для детей',
      keywords: ['книга детская', 'журнал детский', 'раскраска', 'сказки для детей'],
      tnvedCodes: ['4901', '4903'],
      docType: 'declaration',
      notes: ['Декларирование по схеме 3д, 4д или 6д'],
    },
  ],
};

// =====================================================
// ТР ТС 008/2011 - О безопасности игрушек
// Источник: Решение КТС от 23.09.2011 N 798
// =====================================================
export const TR_TS_008_2011: TechnicalRegulation = {
  id: 'TR_TS_008_2011',
  number: '008/2011',
  fullName: 'О безопасности игрушек',
  shortName: 'ТР ТС 008/2011',
  garantTopicId: 12190424,
  garantUrl: 'https://internet.garant.ru/#/document/12190424',
  defaultDocType: 'certificate',
  validFrom: '2012-07-01',
  products: [
    {
      name: 'Игрушки для детей в возрасте до 3 лет',
      keywords: ['игрушка до 3 лет', 'игрушка для малышей', 'погремушка', 'прорезыватель', 'мобиль'],
      tnvedCodes: ['9503 00'],
      docType: 'certificate',
      notes: ['Обязательная сертификация'],
    },
    {
      name: 'Игрушки, контактирующие с ротовой полостью',
      keywords: ['музыкальные инструменты игрушечные', 'свисток игрушечный', 'дудочка'],
      tnvedCodes: ['9503 00'],
      docType: 'certificate',
    },
    {
      name: 'Настольно-печатные игры для детей до 3 лет',
      keywords: ['настольная игра до 3 лет', 'лото детское', 'пазл для малышей'],
      tnvedCodes: ['9503 00 690', '9504'],
      docType: 'certificate',
    },
    {
      name: 'Игрушки мягконабивные',
      keywords: ['мягкая игрушка', 'плюшевая игрушка', 'игрушка мягкая'],
      tnvedCodes: ['9503 00 410', '9503 00 490'],
      docType: 'certificate',
      notes: ['Все мягконабивные игрушки подлежат сертификации'],
    },
    {
      name: 'Куклы',
      keywords: ['кукла', 'пупс', 'барби', 'кукла-малыш'],
      tnvedCodes: ['9503 00 210', '9503 00 290'],
      docType: 'certificate',
    },
    {
      name: 'Игрушки, несущие массу ребенка',
      keywords: ['качалка', 'лошадка-качалка', 'машинка-каталка', 'велосипед игрушечный', 'самокат детский'],
      tnvedCodes: ['9503 00 100', '9503 00 810'],
      docType: 'certificate',
      notes: ['Требуется испытание на прочность и устойчивость'],
    },
    {
      name: 'Электрические игрушки',
      keywords: ['игрушка на батарейках', 'электрическая игрушка', 'робот игрушка', 'машинка на пульте'],
      tnvedCodes: ['9503 00 300'],
      docType: 'certificate',
      notes: ['Дополнительно проверяется электробезопасность'],
    },
    {
      name: 'Конструкторы, модели',
      keywords: ['конструктор', 'лего', 'модель сборная', 'набор для творчества'],
      tnvedCodes: ['9503 00 300', '9503 00 550', '9503 00 700'],
      docType: 'certificate',
    },
    {
      name: 'Прочие игрушки для детей старше 3 лет',
      keywords: ['игрушка', 'машинка', 'солдатик', 'фигурка'],
      tnvedCodes: ['9503'],
      docType: 'declaration',
      notes: ['Декларирование для игрушек детей старше 3 лет, кроме указанных выше категорий'],
    },
  ],
};

// =====================================================
// ТР ТС 009/2011 - О безопасности парфюмерно-косметической продукции
// Источник: Решение КТС от 23.09.2011 N 799
// =====================================================
export const TR_TS_009_2011: TechnicalRegulation = {
  id: 'TR_TS_009_2011',
  number: '009/2011',
  fullName: 'О безопасности парфюмерно-косметической продукции',
  shortName: 'ТР ТС 009/2011',
  garantTopicId: 12190423,
  garantUrl: 'https://internet.garant.ru/#/document/12190423',
  defaultDocType: 'declaration',
  validFrom: '2012-07-01',
  products: [
    // Приложение 12: продукция, требующая СГР
    {
      name: 'Средства для искусственного загара',
      keywords: ['автозагар', 'искусственный загар', 'бронзатор'],
      tnvedCodes: ['3304 99'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.1)'],
    },
    {
      name: 'Средства для отбеливания (осветления) кожи',
      keywords: ['отбеливающий крем', 'осветляющая сыворотка', 'пигментация'],
      tnvedCodes: ['3304 99'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.2)'],
    },
    {
      name: 'Косметика для татуажа',
      keywords: ['татуаж', 'перманентный макияж', 'краска для татуажа', 'пигмент для татуажа'],
      tnvedCodes: ['3304 99', '3212'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.3)'],
    },
    {
      name: 'Интимная косметика',
      keywords: ['интимная гигиена', 'интимный гель', 'для интимной гигиены'],
      tnvedCodes: ['3307 90'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.4)'],
    },
    {
      name: 'Косметика для защиты от производственных факторов',
      keywords: ['защитный крем для рук', 'индустриальная косметика', 'защитная косметика'],
      tnvedCodes: ['3304 99'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.5)'],
    },
    {
      name: 'Детская косметика (для детей до 14 лет)',
      keywords: ['детский крем', 'детский шампунь', 'детское масло', 'косметика для детей', 'для детей'],
      tnvedCodes: ['3304', '3305', '3307'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.6)'],
    },
    {
      name: 'Краски для волос и средства для осветления',
      keywords: ['краска для волос', 'осветлитель', 'блондирование', 'мелирование'],
      tnvedCodes: ['3305 90'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.7)'],
    },
    {
      name: 'Средства для химической завивки и выпрямления',
      keywords: ['химическая завивка', 'выпрямление волос', 'перманент'],
      tnvedCodes: ['3305 90'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.8)'],
    },
    {
      name: 'Косметика с наноматериалами',
      keywords: ['нано', 'наночастицы', 'наноматериалы', 'нанотехнологии'],
      tnvedCodes: ['3304', '3305', '3307'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.9)'],
    },
    {
      name: 'Средства для депиляции',
      keywords: ['депиляция', 'эпиляция', 'крем для депиляции', 'воск для депиляции'],
      tnvedCodes: ['3307 90'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.10)'],
    },
    {
      name: 'Пилинги (глубокое отшелушивание)',
      keywords: ['пилинг', 'кислотный пилинг', 'химический пилинг', 'отшелушивание'],
      tnvedCodes: ['3304 99'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.11)'],
    },
    {
      name: 'Средства гигиены полости рта с содержанием фторида более 0,15%',
      keywords: ['зубная паста с фтором', 'ополаскиватель с фтором'],
      tnvedCodes: ['3306'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.12) - при содержании фторида >0,15%'],
    },
    {
      name: 'Отбеливающие средства для зубов с перекисью водорода',
      keywords: ['отбеливание зубов', 'перекись водорода для зубов', 'домашнее отбеливание'],
      tnvedCodes: ['3306'],
      docType: 'sgr',
      notes: ['Требует СГР + декларация (Приложение 12, п.13) - с концентрацией перекиси 0,1-6%'],
    },
    // Обычная косметика - только декларация
    {
      name: 'Парфюмерия',
      keywords: ['духи', 'туалетная вода', 'парфюмированная вода', 'одеколон', 'парфюм'],
      tnvedCodes: ['3303 00'],
      docType: 'declaration',
    },
    {
      name: 'Средства для макияжа',
      keywords: ['помада', 'тушь', 'тени', 'румяна', 'пудра', 'тональный', 'консилер', 'подводка'],
      tnvedCodes: ['3304 10', '3304 20', '3304 91', '3304 99'],
      docType: 'declaration',
    },
    {
      name: 'Средства для ухода за кожей (взрослые)',
      keywords: ['крем для лица', 'сыворотка', 'лосьон', 'маска для лица', 'средство для умывания'],
      tnvedCodes: ['3304 99'],
      docType: 'declaration',
      notes: ['Кроме продукции, указанной в Приложении 12'],
    },
    {
      name: 'Средства для волос (обычные)',
      keywords: ['шампунь', 'бальзам', 'кондиционер', 'маска для волос', 'спрей для волос'],
      tnvedCodes: ['3305 10', '3305 20', '3305 30', '3305 90'],
      docType: 'declaration',
      notes: ['Кроме красок, осветлителей и средств для химической завивки'],
    },
    {
      name: 'Дезодоранты и антиперспиранты',
      keywords: ['дезодорант', 'антиперспирант', 'стик', 'шариковый'],
      tnvedCodes: ['3307 20'],
      docType: 'declaration',
    },
    {
      name: 'Средства для бритья',
      keywords: ['пена для бритья', 'гель для бритья', 'лосьон после бритья'],
      tnvedCodes: ['3307 10'],
      docType: 'declaration',
    },
    {
      name: 'Средства для ногтей',
      keywords: ['лак для ногтей', 'жидкость для снятия лака', 'базовое покрытие', 'гель-лак'],
      tnvedCodes: ['3304 30'],
      docType: 'declaration',
    },
    {
      name: 'Мыло туалетное',
      keywords: ['мыло туалетное', 'мыло жидкое', 'гель для душа', 'пена для ванны'],
      tnvedCodes: ['3401'],
      docType: 'declaration',
    },
  ],
};

// =====================================================
// ТР ТС 017/2011 - О безопасности продукции легкой промышленности
// Источник: Решение КТС от 09.12.2011 N 876
// =====================================================
export const TR_TS_017_2011: TechnicalRegulation = {
  id: 'TR_TS_017_2011',
  number: '017/2011',
  fullName: 'О безопасности продукции легкой промышленности',
  shortName: 'ТР ТС 017/2011',
  garantTopicId: 12191565,
  garantUrl: 'https://internet.garant.ru/#/document/12191565',
  defaultDocType: 'declaration',
  validFrom: '2012-07-01',
  products: [
    {
      name: 'Одежда текстильная (взрослая)',
      keywords: ['рубашка', 'блузка', 'платье', 'юбка', 'брюки', 'костюм', 'пиджак', 'жилет', 'сарафан'],
      tnvedCodes: ['6104', '6105', '6106', '6203', '6204', '6205', '6206'],
      docType: 'declaration',
    },
    {
      name: 'Верхняя одежда (взрослая)',
      keywords: ['куртка', 'пальто', 'плащ', 'пуховик', 'ветровка', 'парка'],
      tnvedCodes: ['6101', '6102', '6201', '6202'],
      docType: 'declaration',
    },
    {
      name: 'Бельё нательное (взрослое)',
      keywords: ['белье', 'трусы', 'майка', 'футболка', 'бюстгальтер', 'боксеры'],
      tnvedCodes: ['6107', '6108', '6109', '6207', '6208', '6212'],
      docType: 'declaration',
    },
    {
      name: 'Чулочно-носочные изделия (взрослые)',
      keywords: ['носки', 'колготки', 'чулки', 'гольфы'],
      tnvedCodes: ['6115'],
      docType: 'declaration',
    },
    {
      name: 'Головные уборы (взрослые)',
      keywords: ['шапка', 'берет', 'кепка', 'шляпа', 'панама', 'бейсболка'],
      tnvedCodes: ['6505', '6506'],
      docType: 'declaration',
    },
    {
      name: 'Перчаточные изделия (взрослые)',
      keywords: ['перчатки', 'варежки', 'рукавицы', 'митенки'],
      tnvedCodes: ['6116', '6216'],
      docType: 'declaration',
    },
    {
      name: 'Шарфы, платки',
      keywords: ['шарф', 'платок', 'косынка', 'палантин', 'бандана'],
      tnvedCodes: ['6117', '6214'],
      docType: 'declaration',
    },
    {
      name: 'Текстильные изделия бытового назначения',
      keywords: ['полотенце', 'скатерть', 'салфетка', 'покрывало'],
      tnvedCodes: ['6302', '6303', '6304'],
      docType: 'declaration',
    },
    {
      name: 'Обувь (взрослая)',
      keywords: ['туфли', 'ботинки', 'сапоги', 'кроссовки', 'мокасины', 'сандалии', 'босоножки'],
      tnvedCodes: ['6401', '6402', '6403', '6404', '6405'],
      docType: 'declaration',
    },
    {
      name: 'Кожгалантерейные изделия (взрослые)',
      keywords: ['сумка', 'портфель', 'кошелек', 'ремень', 'чемодан'],
      tnvedCodes: ['4202'],
      docType: 'declaration',
    },
    {
      name: 'Изделия из меха (взрослые)',
      keywords: ['шуба', 'дубленка', 'жилет меховой', 'воротник меховой'],
      tnvedCodes: ['4303'],
      docType: 'declaration',
    },
  ],
};

// =====================================================
// ТР ТС 004/2011 - О безопасности низковольтного оборудования
// Источник: Решение КТС от 16.08.2011 N 768
// =====================================================
export const TR_TS_004_2011: TechnicalRegulation = {
  id: 'TR_TS_004_2011',
  number: '004/2011',
  fullName: 'О безопасности низковольтного оборудования',
  shortName: 'ТР ТС 004/2011',
  garantTopicId: 12189170,
  garantUrl: 'https://internet.garant.ru/#/document/12189170',
  defaultDocType: 'declaration',
  validFrom: '2013-02-15',
  products: [
    {
      name: 'Бытовая электротехника (напряжение до 1000В)',
      keywords: ['чайник электрический', 'утюг', 'фен', 'плойка', 'тостер', 'блендер', 'миксер'],
      tnvedCodes: ['8509', '8510', '8516'],
      docType: 'declaration',
    },
    {
      name: 'Электрические плиты и духовки',
      keywords: ['плита электрическая', 'духовка', 'варочная панель', 'мультиварка'],
      tnvedCodes: ['8516 60'],
      docType: 'declaration',
    },
    {
      name: 'Холодильное оборудование бытовое',
      keywords: ['холодильник', 'морозильник', 'морозильная камера'],
      tnvedCodes: ['8418'],
      docType: 'declaration',
    },
    {
      name: 'Стиральные машины',
      keywords: ['стиральная машина', 'сушильная машина', 'стирально-сушильная'],
      tnvedCodes: ['8450', '8451'],
      docType: 'declaration',
    },
    {
      name: 'Пылесосы',
      keywords: ['пылесос', 'робот-пылесос', 'пароочиститель'],
      tnvedCodes: ['8508'],
      docType: 'declaration',
    },
    {
      name: 'Климатическое оборудование бытовое',
      keywords: ['кондиционер', 'вентилятор', 'обогреватель', 'тепловентилятор', 'конвектор'],
      tnvedCodes: ['8414', '8415', '8516 29'],
      docType: 'declaration',
    },
    {
      name: 'Осветительное оборудование',
      keywords: ['светильник', 'люстра', 'бра', 'торшер', 'лампа настольная'],
      tnvedCodes: ['9405'],
      docType: 'declaration',
    },
    {
      name: 'Электроинструмент',
      keywords: ['дрель', 'шуруповерт', 'болгарка', 'лобзик', 'перфоратор'],
      tnvedCodes: ['8467'],
      docType: 'declaration',
    },
  ],
};

// =====================================================
// ТР ТС 020/2011 - Электромагнитная совместимость
// Источник: Решение КТС от 09.12.2011 N 879
// =====================================================
export const TR_TS_020_2011: TechnicalRegulation = {
  id: 'TR_TS_020_2011',
  number: '020/2011',
  fullName: 'Электромагнитная совместимость технических средств',
  shortName: 'ТР ТС 020/2011',
  garantTopicId: 12191563,
  garantUrl: 'https://internet.garant.ru/#/document/12191563',
  defaultDocType: 'declaration',
  validFrom: '2013-02-15',
  products: [
    {
      name: 'Бытовые электрические приборы',
      keywords: ['телевизор', 'магнитофон', 'музыкальный центр', 'радио', 'видеомагнитофон'],
      tnvedCodes: ['8518', '8519', '8521', '8527', '8528'],
      docType: 'declaration',
    },
    {
      name: 'Компьютерная техника',
      keywords: ['компьютер', 'ноутбук', 'планшет', 'монитор', 'принтер', 'сканер'],
      tnvedCodes: ['8471', '8443'],
      docType: 'declaration',
    },
    {
      name: 'Средства связи',
      keywords: ['телефон', 'смартфон', 'модем', 'роутер', 'маршрутизатор'],
      tnvedCodes: ['8517'],
      docType: 'declaration',
    },
  ],
};

// =====================================================
// ТР ТС 010/2011 - О безопасности машин и оборудования
// Источник: Решение КТС от 18.10.2011 N 823
// =====================================================
export const TR_TS_010_2011: TechnicalRegulation = {
  id: 'TR_TS_010_2011',
  number: '010/2011',
  fullName: 'О безопасности машин и оборудования',
  shortName: 'ТР ТС 010/2011',
  garantTopicId: 12190237,
  garantUrl: 'https://internet.garant.ru/#/document/12190237',
  defaultDocType: 'declaration',
  validFrom: '2013-02-15',
  products: [
    {
      name: 'Станки металлообрабатывающие',
      keywords: ['станок токарный', 'станок фрезерный', 'станок шлифовальный', 'станок сверлильный'],
      tnvedCodes: ['8456', '8457', '8458', '8459', '8460', '8461', '8462', '8463'],
      docType: 'declaration',
    },
    {
      name: 'Компрессорное оборудование',
      keywords: ['компрессор', 'компрессорная установка'],
      tnvedCodes: ['8414 40', '8414 80'],
      docType: 'declaration',
    },
    {
      name: 'Насосное оборудование',
      keywords: ['насос', 'насосная станция', 'погружной насос'],
      tnvedCodes: ['8413'],
      docType: 'declaration',
    },
    {
      name: 'Грузоподъёмное оборудование',
      keywords: ['кран', 'подъемник', 'лифт грузовой', 'тельфер', 'лебедка'],
      tnvedCodes: ['8425', '8426', '8428'],
      docType: 'certificate',
      notes: ['Сертификация для оборудования, представляющего повышенную опасность'],
    },
    {
      name: 'Сельскохозяйственные машины',
      keywords: ['трактор', 'комбайн', 'сеялка', 'плуг', 'культиватор'],
      tnvedCodes: ['8432', '8433', '8434', '8435', '8436', '8701'],
      docType: 'declaration',
    },
  ],
};

// =====================================================
// ТР ТС 021/2011 - О безопасности пищевой продукции
// Источник: Решение КТС от 09.12.2011 N 880
// =====================================================
export const TR_TS_021_2011: TechnicalRegulation = {
  id: 'TR_TS_021_2011',
  number: '021/2011',
  fullName: 'О безопасности пищевой продукции',
  shortName: 'ТР ТС 021/2011',
  garantTopicId: 12191566,
  garantUrl: 'https://internet.garant.ru/#/document/12191566',
  defaultDocType: 'declaration',
  validFrom: '2013-07-01',
  products: [
    {
      name: 'Мясо и мясопродукты',
      keywords: ['мясо', 'колбаса', 'сосиски', 'ветчина', 'паштет', 'консервы мясные'],
      tnvedCodes: ['0201', '0202', '0203', '0204', '0205', '0206', '0207', '0208', '0209', '0210', '1601', '1602'],
      docType: 'declaration',
      notes: ['Требуется внедрение ХАССП на производстве'],
    },
    {
      name: 'Рыба и морепродукты',
      keywords: ['рыба', 'морепродукты', 'креветки', 'крабы', 'икра', 'консервы рыбные'],
      tnvedCodes: ['0301', '0302', '0303', '0304', '0305', '0306', '0307', '0308', '1603', '1604', '1605'],
      docType: 'declaration',
    },
    {
      name: 'Молоко и молочная продукция',
      keywords: ['молоко', 'кефир', 'йогурт', 'творог', 'сметана', 'сыр', 'масло сливочное'],
      tnvedCodes: ['0401', '0402', '0403', '0404', '0405', '0406'],
      docType: 'declaration',
    },
    {
      name: 'Кондитерские изделия',
      keywords: ['шоколад', 'конфеты', 'печенье', 'торт', 'пирожное', 'вафли'],
      tnvedCodes: ['1704', '1806', '1905'],
      docType: 'declaration',
    },
    {
      name: 'Напитки безалкогольные',
      keywords: ['сок', 'нектар', 'лимонад', 'газировка', 'минеральная вода'],
      tnvedCodes: ['2009', '2201', '2202'],
      docType: 'declaration',
    },
    {
      name: 'Алкогольные напитки',
      keywords: ['вино', 'пиво', 'водка', 'коньяк', 'виски', 'ликер'],
      tnvedCodes: ['2203', '2204', '2205', '2206', '2207', '2208'],
      docType: 'declaration',
    },
    {
      name: 'Детское питание',
      keywords: ['детское питание', 'смесь детская', 'каша детская', 'пюре детское'],
      tnvedCodes: ['1901 10', '2104'],
      docType: 'sgr',
      notes: ['Требует СГР (Единый перечень КТС 299)'],
    },
    {
      name: 'Специализированное питание',
      keywords: ['спортивное питание', 'питание для беременных', 'лечебное питание'],
      tnvedCodes: ['2106'],
      docType: 'sgr',
      notes: ['Требует СГР (Единый перечень КТС 299)'],
    },
    {
      name: 'БАД (биологически активные добавки)',
      keywords: ['БАД', 'биологически активная добавка', 'витамины', 'омега', 'пробиотик'],
      tnvedCodes: ['2106 90'],
      docType: 'sgr',
      notes: ['Требует СГР (Единый перечень КТС 299)'],
    },
  ],
};

// =====================================================
// ТР ТС 025/2012 - О безопасности мебельной продукции
// Источник: Решение Совета ЕЭК от 15.06.2012 N 32
// =====================================================
export const TR_TS_025_2012: TechnicalRegulation = {
  id: 'TR_TS_025_2012',
  number: '025/2012',
  fullName: 'О безопасности мебельной продукции',
  shortName: 'ТР ТС 025/2012',
  garantTopicId: 70284378,
  garantUrl: 'https://internet.garant.ru/#/document/70284378',
  defaultDocType: 'declaration',
  validFrom: '2014-07-01',
  products: [
    {
      name: 'Мебель бытовая (взрослая)',
      keywords: ['диван', 'кресло', 'стул', 'стол', 'шкаф', 'кровать', 'комод', 'тумба'],
      tnvedCodes: ['9401', '9403'],
      docType: 'declaration',
    },
    {
      name: 'Мебель детская',
      keywords: ['кроватка детская', 'стол детский', 'стул детский', 'парта', 'манеж'],
      tnvedCodes: ['9401', '9403'],
      docType: 'certificate',
      notes: ['Детская мебель требует сертификации по ТР ТС 025/2012'],
    },
    {
      name: 'Мебель офисная',
      keywords: ['офисный стул', 'офисный стол', 'офисное кресло', 'шкаф офисный'],
      tnvedCodes: ['9401 30', '9403 10', '9403 30'],
      docType: 'declaration',
    },
    {
      name: 'Матрасы',
      keywords: ['матрас', 'матрац', 'топпер'],
      tnvedCodes: ['9404 21', '9404 29'],
      docType: 'declaration',
    },
  ],
};

// =====================================================
// Единый перечень товаров для СГР (Решение КТС №299)
// =====================================================
export const SGR_PRODUCTS = {
  // Раздел I. Товары, для которых требуется СГР
  categories: [
    {
      name: 'Минеральная вода',
      keywords: ['минеральная вода', 'лечебная вода', 'столовая вода'],
      tnvedCodes: ['2201 10'],
      notes: ['Природная минеральная, природная питьевая, столовая вода'],
    },
    {
      name: 'Тонизирующие напитки',
      keywords: ['энергетик', 'тонизирующий напиток', 'энергетический напиток'],
      tnvedCodes: ['2202'],
      notes: ['В том числе энергетические'],
    },
    {
      name: 'Биологически активные добавки к пище',
      keywords: ['БАД', 'биологически активная добавка', 'витамины', 'минералы', 'пробиотики'],
      tnvedCodes: ['2106 90'],
      notes: [],
    },
    {
      name: 'Пищевые добавки',
      keywords: ['пищевая добавка', 'ароматизатор', 'краситель пищевой', 'консервант'],
      tnvedCodes: ['2106'],
      notes: ['Комплексные пищевые добавки'],
    },
    {
      name: 'Специализированные пищевые продукты',
      keywords: ['спортивное питание', 'питание для беременных', 'детское питание'],
      tnvedCodes: ['1901', '2104', '2106'],
      notes: ['В том числе для детского питания, диетического, спортивного'],
    },
    {
      name: 'Дезинфицирующие средства',
      keywords: ['дезинфицирующее средство', 'антисептик', 'дезинфекция'],
      tnvedCodes: ['3808'],
      notes: ['Средства для применения в быту и медицинских целях'],
    },
    {
      name: 'Средства для дезинсекции',
      keywords: ['дезинсекция', 'инсектицид бытовой', 'репеллент'],
      tnvedCodes: ['3808'],
      notes: ['Средства для уничтожения насекомых'],
    },
    {
      name: 'Средства для дератизации',
      keywords: ['дератизация', 'родентицид', 'средство от грызунов'],
      tnvedCodes: ['3808'],
      notes: ['Средства для уничтожения грызунов'],
    },
    {
      name: 'Синтетические моющие средства и бытовая химия',
      keywords: ['стиральный порошок', 'моющее средство', 'чистящее средство', 'средство для мытья посуды'],
      tnvedCodes: ['3402', '3405'],
      notes: ['Товары бытовой химии'],
    },
    {
      name: 'Косметические средства для детей (до 14 лет)',
      keywords: ['детский крем', 'детский шампунь', 'детская косметика'],
      tnvedCodes: ['3304', '3305', '3307'],
      notes: ['Косметика, предназначенная для детей до 14 лет'],
    },
    {
      name: 'Материалы, контактирующие с пищевой продукцией',
      keywords: ['упаковка пищевая', 'контейнер для продуктов', 'пищевая пленка'],
      tnvedCodes: ['3917', '3919', '3920', '3923', '3924', '4819', '7010', '7612', '7615'],
      notes: ['Изделия, контактирующие с пищевыми продуктами'],
    },
    {
      name: 'Изделия гигиены полости рта',
      keywords: ['зубная щетка', 'зубная нить', 'ершик зубной'],
      tnvedCodes: ['9603 21'],
      notes: [],
    },
  ],
};

// Полный список всех регламентов
export const ALL_REGULATIONS: TechnicalRegulation[] = [
  TR_TS_007_2011,
  TR_TS_008_2011,
  TR_TS_009_2011,
  TR_TS_017_2011,
  TR_TS_004_2011,
  TR_TS_020_2011,
  TR_TS_010_2011,
  TR_TS_021_2011,
  TR_TS_025_2012,
];

// Функция поиска регламента по коду ТН ВЭД
export function findRegulationsByTnved(code: string): TechnicalRegulation[] {
  const normalizedCode = code.replace(/[\s.]/g, '');
  const results: TechnicalRegulation[] = [];

  for (const regulation of ALL_REGULATIONS) {
    for (const product of regulation.products) {
      const matches = product.tnvedCodes.some(tnved => {
        const normalizedTnved = tnved.replace(/[\s.]/g, '');
        return normalizedCode.startsWith(normalizedTnved) || normalizedTnved.startsWith(normalizedCode);
      });
      if (matches && !results.includes(regulation)) {
        results.push(regulation);
      }
    }
  }

  return results;
}

// Функция поиска категории продукции
export function findProductCategory(code: string, productName: string): {
  regulation: TechnicalRegulation;
  category: ProductCategory;
} | null {
  const normalizedCode = code.replace(/[\s.]/g, '');
  const normalizedName = productName.toLowerCase();

  for (const regulation of ALL_REGULATIONS) {
    for (const product of regulation.products) {
      // Проверяем по ключевым словам
      const keywordMatch = product.keywords.some(kw => normalizedName.includes(kw.toLowerCase()));

      // Проверяем по коду ТН ВЭД
      const codeMatch = product.tnvedCodes.some(tnved => {
        const normalizedTnved = tnved.replace(/[\s.]/g, '');
        return normalizedCode.startsWith(normalizedTnved);
      });

      if (keywordMatch || codeMatch) {
        return { regulation, category: product };
      }
    }
  }

  return null;
}

// Проверка необходимости СГР
export function requiresSGR(code: string, productName: string): boolean {
  const normalizedCode = code.replace(/[\s.]/g, '');
  const normalizedName = productName.toLowerCase();

  for (const category of SGR_PRODUCTS.categories) {
    const keywordMatch = category.keywords.some(kw => normalizedName.includes(kw.toLowerCase()));
    const codeMatch = category.tnvedCodes.some(tnved => {
      const normalizedTnved = tnved.replace(/[\s.]/g, '');
      return normalizedCode.startsWith(normalizedTnved);
    });

    if (keywordMatch || codeMatch) {
      return true;
    }
  }

  return false;
}
